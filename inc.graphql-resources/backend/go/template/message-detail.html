<div class="back-controls">
    <button id="back-to-list" class="btn btn-secondary" onclick="backToList('message')">{{T "back_to_list"}}</button>
    {{if and .Found (eq .Message.ReceiverID.String .AdminID) .Message.IsRead.Bool}}
        <button class="btn btn-primary" onclick="markMessageAsUnread('{{.Message.MessageID}}', 'detail')">{{T "mark_as_unread"}}</button>
        <button class="btn btn-danger" onclick="handleMessageDelete('{{.Message.MessageID}}')">{{T "delete"}}</button>
    {{end}}
</div>

{{if .Found}}
<div class="message-container">
    <div class="message-header">
        <h3>{{.Message.Subject.String}}</h3>
        <div class="message-meta">
            <div><strong>{{T "from"}}:</strong> {{if .Message.SenderName.Valid}}{{.Message.SenderName.String}}{{else}}{{T "system"}}{{end}}</div>
            <div><strong>{{T "to"}}:</strong> {{if .Message.ReceiverName.Valid}}{{.Message.ReceiverName.String}}{{else}}{{T "system"}}{{end}}</div>
            <div><strong>{{T "time"}}:</strong> {{.Message.TimeCreate.String}}</div>
            <div><strong>{{T "status"}}:</strong> 
                {{if .Message.IsRead.Bool}}
                    <span class="status-read">{{T "read_at_time" .Message.TimeRead.String}}</span>
                {{else}}
                    <span class="status-unread">{{T "unread"}}</span>
                {{end}}
            </div>
        </div>
    </div>
    <div class="message-body">
        {{.Message.Content.String}}
    </div>
</div>
{{else}}
<div class="table-container detail-view">
    {{T "no_message_found"}}
</div>
{{end}}