<div class="table-container detail-view">
    <form id="password-update-form" class="form-group" onsubmit="handlePasswordUpdate(event); return false">
        <table class="table table-borderless">
            <tr>
                <td>{{T "current_password"}}</td>
                <td><input type="password" name="current_password" class="form-control" autocomplete="off" required></td>
            </tr>
            <tr>
                <td>{{T "new_password"}}</td>
                <td><input type="password" name="new_password" class="form-control" autocomplete="off" required></td>
            </tr>
            <tr>
                <td>{{T "confirm_password"}}</td>
                <td><input type="password" name="confirm_password" class="form-control" autocomplete="off" required></td>
            </tr>
            <tr>
                <td></td>
                <td>
                    <button type="submit" class="btn btn-success">{{T "update"}}</button>
                    <button type="button" class="btn btn-secondary" onclick="window.location='#user-profile'">{{T "cancel"}}</button>
                </td>
            </tr>
        </table>
    </form>
</div>
<script>
    async function handlePasswordUpdate(event) {
        event.preventDefault();
        const form = document.getElementById('password-update-form');
        const formData = new FormData(form);
        const result = await graphqlApp.updatePassword(formData);
        const title = result.success ? graphqlApp.t('success_title') : graphqlApp.t('error_title');
        await graphqlApp.customAlert({ title: title, message: result.message });
        if (result.success) {
            window.location.hash = '#user-profile';
        }
    }
</script>