class TabDragger{constructor(t,s){if("string"==typeof t)this.list=document.querySelector(t);else if(t instanceof HTMLElement)this.list=t;else throw Error("TabDragger constructor expects a selector string or HTMLElement.");this.draggedItem=null,this.childrenSnapshot=[],this.allEntitiesIndex=()=>Array.from(this.list.children).findIndex(t=>t.classList.contains("all-entities")),this.addTabIndex=()=>Array.from(this.list.children).findIndex(t=>t.classList.contains("add-tab")),"function"==typeof s?this.onEnd=s:this.onEnd=function(){}}makeDraggable(t){t.classList.contains("diagram-tab")&&(t.classList.contains("all-entities")||t.classList.contains("add-tab")||(t.draggable=!0,t.addEventListener("dragstart",()=>{this.draggedItem=t,t.classList.add("dragging"),this.childrenSnapshot=Array.from(this.list.children)}),t.addEventListener("dragend",()=>{this.draggedItem=null,t.classList.remove("dragging")}),t.addEventListener("dragover",s=>{if(s.preventDefault(),!this.draggedItem||t===this.draggedItem||t.classList.contains("all-entities")||t.classList.contains("add-tab"))return;let i=this.childrenSnapshot,e=i.indexOf(this.draggedItem),n=i.indexOf(t),a=i.findIndex(t=>t.classList.contains("all-entities")),d=i.findIndex(t=>t.classList.contains("add-tab"));n<=a||n>=d||(e<n&&t.nextSibling!==this.draggedItem?this.list.insertBefore(this.draggedItem,t.nextSibling):e>n&&t!==this.draggedItem&&this.list.insertBefore(this.draggedItem,t))})))}initAll(){let t=this,s=this.list.querySelectorAll(".diagram-tab");s.forEach(t=>this.makeDraggable(t)),this.list.addEventListener("drop",()=>{setTimeout(function(){t.onEnd()},60)})}}