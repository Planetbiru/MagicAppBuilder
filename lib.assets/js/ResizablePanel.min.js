class ResizablePanels{constructor(e,t,i,s,l=100){this.selector=e,this.element=document.querySelector(this.selector),this.leftPanel=document.querySelector(e+" "+t),this.rightPanel=document.querySelector(e+" "+i),this.resizeBar=document.querySelector(e+" "+s),this.minWidth=l,this.isResizing=!1,this.lastDownX=0,this.localStorageKey=this.selector+"leftPanelWidth",this.init()}init(){this.resizeBar.addEventListener("mousedown",e=>this.startResizing(e)),window.addEventListener("resize",()=>this.onWindowResize()),this.loadPanelWidth()}handleMouseMove(e){if(this.isResizing){let t=e.clientX-this.lastDownX,i=this.leftPanel.offsetWidth+t;if(i>=this.minWidth&&i<=window.innerWidth-this.minWidth){let s=this.leftPanel.parentNode.offsetWidth,l=s-i-10;l<this.minWidth&&(i=s-this.minWidth-10,l=this.minWidth),this.leftPanel.style.width=i+"px",this.rightPanel.style.width=l+"px",this.lastDownX=e.clientX,localStorage.setItem(this.localStorageKey,i)}}}disableSelection(e){e.style.webkitUserSelect="none",e.style.mozUserSelect="none",e.style.msUserSelect="none",e.style.userSelect="none"}enableSelection(e){e.style.webkitUserSelect="auto",e.style.mozUserSelect="auto",e.style.msUserSelect="auto",e.style.userSelect="auto"}startResizing(e){this.isResizing=!0,this.lastDownX=e.clientX,this.disableSelection(this.leftPanel),this.disableSelection(this.rightPanel),this.element.addEventListener("mousemove",e=>this.handleMouseMove(e)),this.element.addEventListener("mouseup",()=>this.stopResizing())}stopResizing(){this.isResizing=!1,this.element.removeEventListener("mousemove",e=>this.handleMouseMove(e)),this.element.removeEventListener("mouseup",()=>this.stopResizing()),editor.refreshEntities(),this.enableSelection(this.leftPanel),this.enableSelection(this.rightPanel)}doResize(e){if(e){let t=parseInt(e,10),i=this.leftPanel.parentNode.offsetWidth,s=i-t-10;s<this.minWidth&&(t=i-(s=this.minWidth)-10),this.leftPanel.style.width=t+"px",this.rightPanel.style.width=s+"px"}}getLeftPanelWidth(){return parseInt(localStorage.getItem(this.localStorageKey))}loadPanelWidth(){this.doResize(this.getLeftPanelWidth())}onWindowResize(){this.doResize(this.getLeftPanelWidth())}}