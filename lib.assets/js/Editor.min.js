let modified=!0,cmEditorModule=null,cmEditorFile=null,cmEditorSQL=null,cmEditorSQLExecute=null,transEd1=null,transEd2=null,transEd3=null,transEd4=null,transEd5=null,transEd6=null,currentTab="",lastLine1=-1,lastLine2=-1,focused={},modeInput=null,fileManagerEditor=null;function clearModuleFile(){cmEditorModule.getDoc().setValue(""),setTimeout(function(){cmEditorModule.refresh()},1)}function clearEntityFile(){cmEditorFile.getDoc().setValue(""),setTimeout(function(){cmEditorFile.refresh()},1)}function setEntityFile(e){cmEditorFile.getDoc().setValue(e),setTimeout(function(){cmEditorFile.refresh()},1)}function clearEditorSQL(){cmEditorSQL.getDoc().setValue(""),setTimeout(function(){cmEditorSQL.refresh()},1)}function clearEditorSQLExecute(){cmEditorSQLExecute.getDoc().setValue(""),setTimeout(function(){cmEditorSQLExecute.refresh()},1)}function clearTtransEd1(){transEd1.getDoc().setValue(""),setTimeout(function(){transEd1.refresh()},1)}function clearTtransEd2(){transEd2.getDoc().setValue(""),setTimeout(function(){transEd2.refresh()},1)}function clearTtransEd3(){transEd3.getDoc().setValue(""),setTimeout(function(){transEd3.refresh()},1)}function clearTtransEd4(){transEd4.getDoc().setValue(""),setTimeout(function(){transEd4.refresh()},1)}function clearTtransEd5(){transEd5.getDoc().setValue(""),setTimeout(function(){transEd5.refresh()},1)}function clearTtransEd6(){transEd6.getDoc().setValue(""),setTimeout(function(){transEd6.refresh()},1)}function format(){let e=cmEditorModule.lineCount();cmEditorModule.autoFormatRange({line:0,ch:0},{line:e});let t=cmEditorFile.lineCount();cmEditorFile.autoFormatRange({line:0,ch:0},{line:t});let n=cmEditorFile.lineCount();cmEditorSQL.autoFormatRange({line:0,ch:0},{line:n});let i=cmEditorSQLExecute.lineCount();cmEditorSQLExecute.autoFormatRange({line:0,ch:0},{line:i});let r=transEd1.lineCount(),a=transEd2.lineCount();transEd1.autoFormatRange({line:0,ch:0},{line:r}),transEd2.autoFormatRange({line:0,ch:0},{line:a});let o=transEd3.lineCount(),l=transEd4.lineCount();transEd3.autoFormatRange({line:0,ch:0},{line:o}),transEd4.autoFormatRange({line:0,ch:0},{line:l})}function isHidden(e){return"none"==e.display||"hidden"==e.visibility}let initEditor=function(){$("#modal-query-executor").on("shown.bs.modal",function(){cmEditorSQLExecute.refresh(),cmEditorSQLExecute.focus(),$(".button-execute-query")[0].disabled=!1}),$("#maintab").on("shown.bs.tab",function(e){let t=$(e.target).attr("id");currentTab=t,"entity-file-tab"==t&&(cmEditorFile.focus(),cmEditorFile.refresh()),"entity-query-tab"==t&&(cmEditorSQL.focus(),cmEditorSQL.refresh()),"translate-entity-tab"==t&&(transEd1.refresh(),transEd2.refresh()),"translate-application-tab"==t&&(transEd3.refresh(),transEd4.refresh()),"module-file-tab"==t&&cmEditorModule.refresh(),"file-manager-tab"==t&&fileManagerEditor.refresh(),"translate-app-tab"==t&&(transEd5.refresh(),transEd6.refresh())}),$(document).on("keydown",function(e){return"115"!=e.which&&"83"!=e.which||!e.ctrlKey&&!e.metaKey||(e.preventDefault(),"module-file-tab"==currentTab&&saveModule(),"entity-file-tab"==currentTab&&saveEntity(),"entity-query-tab"==currentTab&&saveQuery(),!1)}),CodeMirror.modeURL="lib.assets/cm/mode/%N/%N.js",cmEditorModule=CodeMirror.fromTextArea(document.querySelector(".module-file"),{lineNumbers:!0,lineWrapping:!0,matchBrackets:!0,indentUnit:4,indentWithTabs:!0,extraKeys:{"Ctrl-S":function(e){saveModule()}}}),cmEditorFile=CodeMirror.fromTextArea(document.querySelector(".entity-file"),{lineNumbers:!0,lineWrapping:!0,matchBrackets:!0,indentUnit:4,indentWithTabs:!0}),cmEditorSQL=CodeMirror.fromTextArea(document.querySelector(".entity-query"),{lineNumbers:!0,lineWrapping:!0,matchBrackets:!0,indentUnit:4,indentWithTabs:!0}),cmEditorSQLExecute=CodeMirror.fromTextArea(document.querySelector("#query_to_execute"),{lineNumbers:!0,lineWrapping:!0,matchBrackets:!0,indentUnit:4,indentWithTabs:!0}),transEd1=CodeMirror.fromTextArea(document.querySelector(".entity-translate-original"),{lineNumbers:!0,lineWrapping:!0,matchBrackets:!0,indentUnit:4,indentWithTabs:!0,readOnly:!0}),transEd2=CodeMirror.fromTextArea(document.querySelector(".entity-translate-target"),{lineNumbers:!0,lineWrapping:!0,matchBrackets:!0,indentUnit:4,indentWithTabs:!0}),transEd1.on("focus",function(){focused.transEd1=!0,hilightLine1()}),transEd2.on("focus",function(){focused.transEd2=!0,hilightLine2()}),transEd1.on("cursorActivity",function(){void 0!==focused.transEd1&&hilightLine1()}),transEd2.on("cursorActivity",function(){void 0!==focused.transEd2&&hilightLine2()}),transEd3=CodeMirror.fromTextArea(document.querySelector(".module-translate-original"),{lineNumbers:!0,lineWrapping:!0,matchBrackets:!0,indentUnit:4,indentWithTabs:!0,readOnly:!0}),transEd4=CodeMirror.fromTextArea(document.querySelector(".module-translate-target"),{lineNumbers:!0,lineWrapping:!0,matchBrackets:!0,indentUnit:4,indentWithTabs:!0}),transEd5=CodeMirror.fromTextArea(document.querySelector(".app-translate-original"),{lineNumbers:!0,lineWrapping:!0,matchBrackets:!0,indentUnit:4,indentWithTabs:!0,readOnly:!0}),transEd6=CodeMirror.fromTextArea(document.querySelector(".app-translate-target"),{lineNumbers:!0,lineWrapping:!0,matchBrackets:!0,indentUnit:4,indentWithTabs:!0}),transEd3.on("focus",function(){focused.transEd3=!0,hilightLine3()}),transEd4.on("focus",function(){focused.transEd4=!0,hilightLine4()}),transEd3.on("cursorActivity",function(){void 0!==focused.transEd3&&hilightLine3()}),transEd4.on("cursorActivity",function(){void 0!==focused.transEd4&&hilightLine4()}),transEd5.on("focus",function(){focused.transEd5=!0,hilightLine5()}),transEd6.on("focus",function(){focused.transEd6=!0,hilightLine6()}),transEd5.on("cursorActivity",function(){void 0!==focused.transEd5&&hilightLine5()}),transEd6.on("cursorActivity",function(){void 0!==focused.transEd6&&hilightLine6()});let e,t,n=CodeMirror.findModeByExtension("php");e=n.mode,t=n.mime,e&&(cmEditorModule.setOption("mode",t),CodeMirror.autoLoadMode(cmEditorModule,e),setTimeout(function(){cmEditorModule.refresh()},1));let i,r,a=CodeMirror.findModeByExtension("php");i=a.mode,r=a.mime,i&&(cmEditorFile.setOption("mode",r),CodeMirror.autoLoadMode(cmEditorFile,i),setTimeout(function(){cmEditorFile.refresh()},1));let o,l,s=CodeMirror.findModeByExtension("sql");o=s.mode,l=s.mime,o&&(cmEditorSQL.setOption("mode",l),CodeMirror.autoLoadMode(cmEditorSQL,o),setTimeout(function(){cmEditorSQL.refresh()},1),cmEditorSQLExecute.setOption("mode",l),CodeMirror.autoLoadMode(cmEditorSQLExecute,o),setTimeout(function(){cmEditorSQLExecute.refresh()},1))};function hilightLine1(){let e=transEd1.getCursor().line;transEd1.removeLineClass(lastLine1,"background","highlight-line"),transEd2.removeLineClass(lastLine1,"background","highlight-line"),transEd2.addLineClass(e,"background","highlight-line"),transEd1.addLineClass(e,"background","highlight-line"),lastLine1=e;let t=entityTranslationData[e].propertyName;$(".entity-translation-status").text(t)}function hilightLine2(){let e=transEd2.getCursor().line;transEd1.removeLineClass(lastLine1,"background","highlight-line"),transEd2.removeLineClass(lastLine1,"background","highlight-line"),transEd2.addLineClass(e,"background","highlight-line"),transEd1.addLineClass(e,"background","highlight-line"),lastLine1=e;let t=entityTranslationData[e].propertyName;$(".entity-translation-status").text(t)}function hilightLine3(){let e=transEd3.getCursor().line;transEd3.removeLineClass(lastLine1,"background","highlight-line"),transEd4.removeLineClass(lastLine1,"background","highlight-line"),transEd4.addLineClass(e,"background","highlight-line"),transEd3.addLineClass(e,"background","highlight-line"),lastLine1=e;let t=moduleTranslationData&&moduleTranslationData[e]?moduleTranslationData[e].propertyName:void 0;t&&$(".module-translation-status").text(t)}function hilightLine4(){let e=transEd4.getCursor().line;transEd3.removeLineClass(lastLine1,"background","highlight-line"),transEd4.removeLineClass(lastLine1,"background","highlight-line"),transEd4.addLineClass(e,"background","highlight-line"),transEd3.addLineClass(e,"background","highlight-line"),lastLine1=e;let t=moduleTranslationData&&moduleTranslationData[e]?moduleTranslationData[e].propertyName:void 0;t&&$(".module-translation-status").text(t)}function hilightLine5(){let e=transEd5.getCursor().line;transEd5.removeLineClass(lastLine2,"background","highlight-line"),transEd6.removeLineClass(lastLine2,"background","highlight-line"),transEd5.addLineClass(e,"background","highlight-line"),transEd6.addLineClass(e,"background","highlight-line"),lastLine2=e;let t=appTranslationData&&appTranslationData[e]?appTranslationData[e].propertyName:void 0;t&&$(".app-translation-status").text(t)}function hilightLine6(){let e=transEd6.getCursor().line;transEd5.removeLineClass(lastLine2,"background","highlight-line"),transEd6.removeLineClass(lastLine2,"background","highlight-line"),transEd5.addLineClass(e,"background","highlight-line"),transEd6.addLineClass(e,"background","highlight-line"),lastLine2=e;let t=appTranslationData&&appTranslationData[e]?appTranslationData[e].propertyName:void 0;t&&$(".app-translation-status").text(t)}function initCodeMirror(){modeInput=document.getElementById("filename"),CodeMirror.modeURL="lib.assets/cm/mode/%N/%N.js",fileManagerEditor=CodeMirror.fromTextArea(document.getElementById("code"),{lineNumbers:!0,lineWrapping:!0,matchBrackets:!0,indentUnit:4,indentWithTabs:!0}),window.addEventListener("resize",function(e){let t=document.querySelector("#file-content").offsetWidth-16,n=document.innerHeight-160;fileManagerEditor.setSize(t,n)});let e=document.querySelector("#file-content").offsetWidth-16,t=document.innerHeight-160;fileManagerEditor.setSize(e,t)}