let modified=!0,cmEditorModule=null,cmEditorFile=null,cmEditorSQL=null,cmEditorSQLExecute=null,cmEditorValidator=null,transEd1=null,transEd2=null,transEd3=null,transEd4=null,transEd5=null,transEd6=null,currentTab="",lastLine1=-1,lastLine2=-1,focused={},modeInput=null,fileManagerEditor=null;function clearModuleFile(){cmEditorModule.getDoc().setValue(""),setTimeout(function(){cmEditorModule.refresh()},1)}function clearEntityFile(){cmEditorFile.getDoc().setValue(""),setTimeout(function(){cmEditorFile.refresh()},1)}function setEntityFile(t){cmEditorFile.getDoc().setValue(t),setTimeout(function(){cmEditorFile.refresh()},1)}function clearValidatorFile(){cmEditorValidator.getDoc().setValue(""),setTimeout(function(){cmEditorValidator.refresh()},1)}function setValidatorFile(t){cmEditorValidator.getDoc().setValue(t),setTimeout(function(){cmEditorValidator.refresh()},1)}function clearEditorSQL(){cmEditorSQL.getDoc().setValue(""),setTimeout(function(){cmEditorSQL.refresh()},1)}function clearEditorSQLExecute(){cmEditorSQLExecute.getDoc().setValue(""),setTimeout(function(){cmEditorSQLExecute.refresh()},1)}function clearTtransEd1(){transEd1.getDoc().setValue(""),setTimeout(function(){transEd1.refresh()},1)}function clearTtransEd2(){transEd2.getDoc().setValue(""),setTimeout(function(){transEd2.refresh()},1)}function clearTtransEd3(){transEd3.getDoc().setValue(""),setTimeout(function(){transEd3.refresh()},1)}function clearTtransEd4(){transEd4.getDoc().setValue(""),setTimeout(function(){transEd4.refresh()},1)}function clearTtransEd5(){transEd5.getDoc().setValue(""),setTimeout(function(){transEd5.refresh()},1)}function clearTtransEd6(){transEd6.getDoc().setValue(""),setTimeout(function(){transEd6.refresh()},1)}function format(){let t=cmEditorModule.lineCount();cmEditorModule.autoFormatRange({line:0,ch:0},{line:t});let e=cmEditorFile.lineCount();cmEditorFile.autoFormatRange({line:0,ch:0},{line:e});let n=cmEditorValidator.lineCount();cmEditorValidator.autoFormatRange({line:0,ch:0},{line:n});let i=cmEditorSQL.lineCount();cmEditorSQL.autoFormatRange({line:0,ch:0},{line:i});let r=cmEditorSQLExecute.lineCount();cmEditorSQLExecute.autoFormatRange({line:0,ch:0},{line:r});let a=transEd1.lineCount(),o=transEd2.lineCount();transEd1.autoFormatRange({line:0,ch:0},{line:a}),transEd2.autoFormatRange({line:0,ch:0},{line:o});let l=transEd3.lineCount(),d=transEd4.lineCount();transEd3.autoFormatRange({line:0,ch:0},{line:l}),transEd4.autoFormatRange({line:0,ch:0},{line:d});let s=transEd5.lineCount(),c=transEd6.lineCount();transEd5.autoFormatRange({line:0,ch:0},{line:s}),transEd6.autoFormatRange({line:0,ch:0},{line:c})}function isHidden(t){return"none"==t.display||"hidden"==t.visibility}let initEditor=function(){$("#modal-query-executor").on("shown.bs.modal",function(){cmEditorSQLExecute.refresh(),cmEditorSQLExecute.focus(),$(".button-execute-query")[0].disabled=!1}),$("#maintab").on("shown.bs.tab",function(t){let e=$(t.target).attr("id");currentTab=e,"entity-file-tab"==e&&(cmEditorFile.focus(),cmEditorFile.refresh()),"validator-file-tab"==e&&(cmEditorValidator.focus(),cmEditorValidator.refresh()),"entity-query-tab"==e&&(cmEditorSQL.focus(),cmEditorSQL.refresh()),"translate-entity-tab"==e&&(transEd1.refresh(),transEd2.refresh()),"translate-application-tab"==e&&(transEd3.refresh(),transEd4.refresh()),"module-file-tab"==e&&cmEditorModule.refresh(),"file-manager-tab"==e&&fileManagerEditor.refresh(),"translate-app-tab"==e&&(transEd5.refresh(),transEd6.refresh())}),$(document).on("keydown",function(t){return"115"!=t.which&&"83"!=t.which||!t.ctrlKey&&!t.metaKey||(t.preventDefault(),"module-file-tab"==currentTab&&saveModule(),"entity-file-tab"==currentTab&&saveEntity(),"validator-file-tab"==currentTab&&saveValidator(),"entity-query-tab"==currentTab&&saveQuery(),!1)}),CodeMirror.modeURL="lib.assets/cm/mode/%N/%N.js",cmEditorModule=CodeMirror.fromTextArea(document.querySelector(".module-file"),{lineNumbers:!0,lineWrapping:!0,matchBrackets:!0,indentUnit:4,indentWithTabs:!0,extraKeys:{"Ctrl-S":function(t){saveModule()}}}),cmEditorFile=CodeMirror.fromTextArea(document.querySelector(".entity-file"),{lineNumbers:!0,lineWrapping:!0,matchBrackets:!0,indentUnit:4,indentWithTabs:!0}),cmEditorValidator=CodeMirror.fromTextArea(document.querySelector(".validator-file"),{lineNumbers:!0,lineWrapping:!0,matchBrackets:!0,indentUnit:4,indentWithTabs:!0}),cmEditorSQL=CodeMirror.fromTextArea(document.querySelector(".entity-query"),{lineNumbers:!0,lineWrapping:!0,matchBrackets:!0,indentUnit:4,indentWithTabs:!0}),cmEditorSQLExecute=CodeMirror.fromTextArea(document.querySelector("#query_to_execute"),{lineNumbers:!0,lineWrapping:!0,matchBrackets:!0,indentUnit:4,indentWithTabs:!0}),transEd1=CodeMirror.fromTextArea(document.querySelector(".entity-translate-original"),{lineNumbers:!0,lineWrapping:!0,matchBrackets:!0,indentUnit:4,indentWithTabs:!0,readOnly:!0}),transEd2=CodeMirror.fromTextArea(document.querySelector(".entity-translate-target"),{lineNumbers:!0,lineWrapping:!0,matchBrackets:!0,indentUnit:4,indentWithTabs:!0}),transEd1.on("focus",function(){focused.transEd1=!0,hilightLine1()}),transEd2.on("focus",function(){focused.transEd2=!0,hilightLine2()}),transEd1.on("cursorActivity",function(){void 0!==focused.transEd1&&hilightLine1()}),transEd2.on("cursorActivity",function(){void 0!==focused.transEd2&&hilightLine2()}),transEd3=CodeMirror.fromTextArea(document.querySelector(".module-translate-original"),{lineNumbers:!0,lineWrapping:!0,matchBrackets:!0,indentUnit:4,indentWithTabs:!0,readOnly:!0}),transEd4=CodeMirror.fromTextArea(document.querySelector(".module-translate-target"),{lineNumbers:!0,lineWrapping:!0,matchBrackets:!0,indentUnit:4,indentWithTabs:!0}),transEd5=CodeMirror.fromTextArea(document.querySelector(".app-translate-original"),{lineNumbers:!0,lineWrapping:!0,matchBrackets:!0,indentUnit:4,indentWithTabs:!0,readOnly:!0}),transEd6=CodeMirror.fromTextArea(document.querySelector(".app-translate-target"),{lineNumbers:!0,lineWrapping:!0,matchBrackets:!0,indentUnit:4,indentWithTabs:!0}),transEd3.on("focus",function(){focused.transEd3=!0,hilightLine3()}),transEd4.on("focus",function(){focused.transEd4=!0,hilightLine4()}),transEd3.on("cursorActivity",function(){void 0!==focused.transEd3&&hilightLine3()}),transEd4.on("cursorActivity",function(){void 0!==focused.transEd4&&hilightLine4()}),transEd5.on("focus",function(){focused.transEd5=!0,hilightLine5()}),transEd6.on("focus",function(){focused.transEd6=!0,hilightLine6()}),transEd5.on("cursorActivity",function(){void 0!==focused.transEd5&&hilightLine5()}),transEd6.on("cursorActivity",function(){void 0!==focused.transEd6&&hilightLine6()});let t=CodeMirror.findModeByExtension("php");t&&(cmEditorModule.setOption("mode",t.mime),CodeMirror.autoLoadMode(cmEditorModule,t.mode),setTimeout(function(){cmEditorModule.refresh()},1));let e=CodeMirror.findModeByExtension("php");e&&(cmEditorFile.setOption("mode",e.mime),CodeMirror.autoLoadMode(cmEditorFile,e.mode),setTimeout(function(){cmEditorFile.refresh()},1));let n=CodeMirror.findModeByExtension("php");n&&(cmEditorValidator.setOption("mode",n.mime),CodeMirror.autoLoadMode(cmEditorValidator,n.mode),setTimeout(function(){cmEditorValidator.refresh()},1));let i=CodeMirror.findModeByExtension("sql");i&&(cmEditorSQL.setOption("mode",i.mime),CodeMirror.autoLoadMode(cmEditorSQL,i.mode),setTimeout(function(){cmEditorSQL.refresh()},1),cmEditorSQLExecute.setOption("mode",i.mime),CodeMirror.autoLoadMode(cmEditorSQLExecute,i.mode),setTimeout(function(){cmEditorSQLExecute.refresh()},1))};function hilightLine1(){let t=transEd1.getCursor().line;transEd1.removeLineClass(lastLine1,"background","highlight-line"),transEd2.removeLineClass(lastLine1,"background","highlight-line"),transEd2.addLineClass(t,"background","highlight-line"),transEd1.addLineClass(t,"background","highlight-line"),lastLine1=t;let e=entityTranslationData[t].propertyName;$(".entity-translation-status").text(e)}function hilightLine2(){let t=transEd2.getCursor().line;transEd1.removeLineClass(lastLine1,"background","highlight-line"),transEd2.removeLineClass(lastLine1,"background","highlight-line"),transEd2.addLineClass(t,"background","highlight-line"),transEd1.addLineClass(t,"background","highlight-line"),lastLine1=t;let e=entityTranslationData[t].propertyName;$(".entity-translation-status").text(e)}function hilightLine3(){let t=transEd3.getCursor().line;transEd3.removeLineClass(lastLine1,"background","highlight-line"),transEd4.removeLineClass(lastLine1,"background","highlight-line"),transEd4.addLineClass(t,"background","highlight-line"),transEd3.addLineClass(t,"background","highlight-line"),lastLine1=t;let e=moduleTranslationData&&moduleTranslationData[t]?moduleTranslationData[t].propertyName:void 0;e&&$(".module-translation-status").text(e)}function hilightLine4(){let t=transEd4.getCursor().line;transEd3.removeLineClass(lastLine1,"background","highlight-line"),transEd4.removeLineClass(lastLine1,"background","highlight-line"),transEd4.addLineClass(t,"background","highlight-line"),transEd3.addLineClass(t,"background","highlight-line"),lastLine1=t;let e=moduleTranslationData&&moduleTranslationData[t]?moduleTranslationData[t].propertyName:void 0;e&&$(".module-translation-status").text(e)}function hilightLine5(){let t=transEd5.getCursor().line;transEd5.removeLineClass(lastLine2,"background","highlight-line"),transEd6.removeLineClass(lastLine2,"background","highlight-line"),transEd5.addLineClass(t,"background","highlight-line"),transEd6.addLineClass(t,"background","highlight-line"),lastLine2=t;let e=appTranslationData&&appTranslationData[t]?appTranslationData[t].propertyName:void 0;e&&$(".app-translation-status").text(e)}function hilightLine6(){let t=transEd6.getCursor().line;transEd5.removeLineClass(lastLine2,"background","highlight-line"),transEd6.removeLineClass(lastLine2,"background","highlight-line"),transEd5.addLineClass(t,"background","highlight-line"),transEd6.addLineClass(t,"background","highlight-line"),lastLine2=t;let e=appTranslationData&&appTranslationData[t]?appTranslationData[t].propertyName:void 0;e&&$(".app-translation-status").text(e)}function initCodeMirror2(){modeInput=document.getElementById("filename"),CodeMirror.modeURL="lib.assets/cm/mode/%N/%N.js",fileManagerEditor=CodeMirror.fromTextArea(document.getElementById("code"),{lineNumbers:!0,lineWrapping:!0,matchBrackets:!0,indentUnit:4,indentWithTabs:!0}),window.addEventListener("resize",function(t){let e=document.querySelector("#file-content").offsetWidth-16,n=document.innerHeight-160;fileManagerEditor.setSize(e,n)});let t=document.querySelector("#file-content").offsetWidth-16,e=document.innerHeight-160;fileManagerEditor.setSize(t,e)}