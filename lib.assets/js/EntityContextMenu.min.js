let selectedElement=null;function initDiagramContextMenu(e){let t=document.querySelector("#context-menu");e.addEventListener("contextmenu",function(e){let n=e.target.closest("g.svg-entity");n?(e.preventDefault(),renderContextMenu(n),selectedElement=n,t.style.top=`${e.pageY}px`,t.style.left=`${e.pageX}px`,t.style.display="block"):t.style.display="none"})}function renderContextMenu(e){let t=document.querySelector("#context-menu"),n=t.querySelector("ul");n.innerHTML="";let l=e.dataset.entity,a=e.querySelectorAll(".diagram-column-name");a.forEach((e,t)=>{let a=e.textContent.trim();if(!a.startsWith(l)&&a.endsWith("_id")){let c=a.substring(0,a.length-3),i=document.createElement("li");i.dataset.type="relation";let r=document.createElement("label"),d=document.createElement("input"),o=`relation-${t}`;d.type="checkbox",d.id=o,d.dataset.name=c,d.addEventListener("change",function(e){selectTable(e)}),d.checked=isSelectedTable(c),r.setAttribute("for",o),r.appendChild(d);let s=` ${a}`;r.appendChild(document.createTextNode(s)),i.appendChild(r),n.appendChild(i)}})}function selectTable(e){let t=e.target.dataset.name,n=document.querySelector(`.table-list input[data-name="${t}"]`);n.checked=e.target.checked,n.dispatchEvent(new Event("change",{bubbles:!0}))}function isSelectedTable(e){let t=document.querySelector(`.table-list input[data-name="${e}"]`);return!!t&&t.checked}document.addEventListener("DOMContentLoaded",function(){document.addEventListener("click",function(e){let t=document.querySelector("#context-menu");e.target.closest("#context-menu")||(t.style.display="none")})});