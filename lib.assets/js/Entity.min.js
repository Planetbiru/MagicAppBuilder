class Entity{constructor(t,e){this.index=e,this.name=t,this.columns=[],this.data=[]}addColumn(t){this.columns.push(t)}removeColumn(t){this.columns.splice(t,1)}setData(t){this.data=t||[]}toSQL(t="mysql"){let e=`CREATE TABLE IF NOT EXISTS ${this.name} (\r
`;return this.columns.forEach(s=>{e+=`	${s.toSQL(t)},\r
`}),e=e.slice(0,-3),e+="\r\n);\r\n\r\n"}toSQLInsert(t="mysql"){if(!this.data||0===this.data.length)return"";let e=this.columns.map(t=>t.name),s=this.data.map(s=>"("+e.map(e=>{let n=this.columns.find(t=>t.name===e);return this.formatValue(s[e],n,t)}).join(", ")+")");return`INSERT INTO ${this.name} (${e.join(", ")}) VALUES
${s.join(",\n")};\r
`}createInsert(t,e){let s=e.join(", "),n=e.map(e=>this.formatValue(t[e])).join(", ");return`INSERT INTO ${this.name} (${s}) VALUES (${n});`}formatValue(t,e,s="mysql"){let n=e.type.toLowerCase(),r=e.length,l="null",a=e.isTypeText(n),o=null==t||"string"==typeof t&&""===t.trim()||!a&&"null"===String(t).toLowerCase();if(o)return l;let i=e.isTypeInteger(n),u=e.isTypeFloat(n),m=e.isTypeBoolean(n,r);return m?this.formatBoolean(t,s):i||u?t.toString():this.quoteString(t)}formatBoolean(t,e="mysql"){if(null==t||"string"==typeof t&&"null"===t.trim().toLowerCase())return"null";let s=String(t).toLowerCase().trim(),n="true"===s||"1"===s||"yes"===s;switch(e.toLowerCase()){case"sqlite":case"sqlserver":case"mysql":default:return n?"1":"0";case"postgresql":return n?"true":"false"}}quoteString(t){let e=String(t).replace(/'/g,"''");return`'${e}'`}}