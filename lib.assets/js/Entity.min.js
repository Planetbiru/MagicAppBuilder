class Entity{constructor(t,e){this.index=e,this.name=t,this.columns=[],this.data=[]}addColumn(t){this.columns.push(t)}removeColumn(t){this.columns.splice(t,1)}setData(t){this.data=t||[]}toSQL(t="mysql"){let e=[],s=`CREATE TABLE IF NOT EXISTS ${this.name} (\r
`;return this.columns.forEach(s=>{e.push(`	${s.toSQL(t)}`)}),s+=e.join(",\r\n"),s+="\r\n);\r\n\r\n"}toSQLInsert(t="mysql"){if(!this.data||0===this.data.length)return"";let e=this.columns.map(t=>t.name),s=this.data.map(s=>"("+e.map(e=>{let n=this.columns.find(t=>t.name===e),r=!!n&&n.nullable;return this.formatValue(s[e],n,t,r)}).join(", ")+")");return`INSERT INTO ${this.name} (${e.join(", ")}) VALUES
${s.join(",\n")};\r
`}createInsert(t,e){let s=e.join(", "),n=e.map(e=>{let s=this.columns.find(t=>t.name===e),n=!s||s.nullable;return this.formatValue(t[e],s,"mysql",n)}).join(", ");return`INSERT INTO ${this.name} (${s}) VALUES (${n});`}formatValue(t,e,s="mysql",n=!0){let r=e.type.toLowerCase(),l=e.length,a=e.isTypeText(r),o=e.isTypeInteger(r),i=e.isTypeFloat(r),u=e.isTypeBoolean(r,l),m=null==t||"string"==typeof t&&""===t.trim()||!a&&"null"===String(t).toLowerCase();return m?n?"null":o||i?"0":u?this.formatBoolean(t,s,!1):"''":u?this.formatBoolean(t,s,n):o||i?t.toString():this.quoteString(t)}formatBoolean(t,e="mysql",s=!0){let n=null==t||"string"==typeof t&&"null"===t.trim().toLowerCase();if(n){if(s)return"null";switch(e.toLowerCase()){case"sqlite":case"sqlserver":case"mysql":default:return"0";case"postgresql":return"false"}}let r=String(t).toLowerCase().trim(),l="true"===r||"1"===r||"yes"===r;switch(e.toLowerCase()){case"sqlite":case"sqlserver":case"mysql":default:return l?"1":"0";case"postgresql":return l?"true":"false"}}quoteString(t){let e=String(t).replace(/'/g,"''");return`'${e}'`}}